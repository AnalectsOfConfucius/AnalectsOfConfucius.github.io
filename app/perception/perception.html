<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>感知平台</title>
    <!-- Bootstrap -->
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
    <style type="text/css">
        .yyh-title {
            background: #3f76f7;
            font-family: SimHei;
            font-weight: bold;
            font-size: 30px;
            color: white;
            border: 1px solid white;
        }

        .yyh-title .yyh-watch {
            color: #e99824;
        }

        .yyh-title .yyh-date {
            font-size: 12px;
        }

        .yyh-title-second {
            background: #328de8;
            font-family: SimHei;
            font-weight: bold;
            font-size: 20px;
            color: white;
            border: 1px solid white;
        }

        .yyh-table {
            width: 100%;
            font-size: 4px;
            color: #3b3b3b;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
            display: table;
        }

        .yyh-row {
            display: table-row;
            background: #f6f6f6;
        }

        .yyh-header-gray {
            display: table-row;
            font-weight: bold;
            color: black;
            background: #cecac1;
        }

        .yyh-header-blue {
            display: table-row;
            font-weight: bold;
            color: #ffffff;
            background: #398ecf;
        }

        .yyh-cell {
            padding: 6px 12px;
            display: table-cell;
        }

        .yyh-count {
            background: #b8ac96;
            margin-bottom: 40px;
        }

        .yyh-count p {
            margin: 10px;
            font-size: 20px;
            line-height: 80%;
            font-family: SimHei;
        }

        .yyh-count .yyh-left-number {
            font-size: 20px;
            color: #339933;
            font-family: SimHei;
            text-decoration: underline;
        }

        .yyh-count .yyh-right-number {
            font-size: 20px;
            color: #eae31e;
            font-family: SimHei;
            text-decoration: underline;
        }

        .yyh-border {
            border: 1px solid white;
        }
    </style>
</head>
<body>
<div class="container-fluid">
    <div class="row">
        <div class="col-md-3">
            <div class="row text-center yyh-title">
                <div class="col-md-6">
                    15:27:08
                </div>
                <div class="col-md-6 yyh-date" style="margin-top: 5px;">
                    2016年12月26日
                    <br>
                    星期一
                </div>
            </div>
            <div class="row">
                <div class="yyh-title-second">
                    公司类型分析（公司类型比例分布）
                </div>
                <div class="col-md-6">
                    <div class="yyh-table text-center">
                        <div class="yyh-header-gray">
                            <div class="yyh-cell"></div>
                            <div class="yyh-cell">合计</div>
                        </div>
                        <div class="yyh-row">
                            <div class="yyh-cell">个体工商户</div>
                            <div class="yyh-cell">66%</div>
                        </div>
                        <div class="yyh-row">
                            <div class="yyh-cell">股份企业</div>
                            <div class="yyh-cell">10%</div>
                        </div>
                        <div class="yyh-row">
                            <div class="yyh-cell">有限公司</div>
                            <div class="yyh-cell">21%</div>
                        </div>
                        <div class="yyh-row">
                            <div class="yyh-cell">事业单位</div>
                            <div class="yyh-cell">18%</div>
                        </div>
                        <div class="yyh-row">
                            <div class="yyh-cell">其他</div>
                            <div class="yyh-cell">21</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div id="echarts-cake-chart1" style="height:180px"></div>
                </div>
            </div>
            <div class="row">
                <div class="yyh-title-second">
                    本月全市业务办理情况统计
                </div>
                <div class="col-md-6">
                    <div class="yyh-table text-center">
                        <div class="yyh-header-gray">
                            <div class="yyh-cell"></div>
                            <div class="yyh-cell">受理量</div>
                            <div class="yyh-cell">审核量</div>
                        </div>
                        <div class="yyh-row">
                            <div class="yyh-cell">名称登记</div>
                            <div class="yyh-cell">21</div>
                            <div class="yyh-cell">21</div>
                        </div>
                        <div class="yyh-row">
                            <div class="yyh-cell">设立登记</div>
                            <div class="yyh-cell">21</div>
                            <div class="yyh-cell">21</div>
                        </div>
                        <div class="yyh-row">
                            <div class="yyh-cell">变更登记</div>
                            <div class="yyh-cell">21</div>
                            <div class="yyh-cell">21</div>
                        </div>
                        <div class="yyh-row">
                            <div class="yyh-cell">注销</div>
                            <div class="yyh-cell">21</div>
                            <div class="yyh-cell">21</div>
                        </div>
                        <div class="yyh-row">
                            <div class="yyh-cell">总计</div>
                            <div class="yyh-cell">21</div>
                            <div class="yyh-cell">21</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div id="echarts-cake-chart2" style="height:180px"></div>
                </div>
            </div>
            <div class="row">
                <div class="yyh-title-second">
                    市场主体行业门类分析
                </div>
                <div id="echarts-cake-chart-hyml" style="height:360px"></div>
            </div>
            <div class="row">
                <div class="yyh-title-second">
                    2015年度年报进度情况
                </div>
                <div id="echarts-bar-chart" style="height:360px"></div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="row text-center yyh-title">
                今日业务办理情况统计
            </div>
            <div class="row">
                <div class="col-md-5">
                    <div id="echarts-map-chart" style="height:400px"></div>
                </div>
                <div class="col-md-7">
                    <div class="yyh-table text-center" style="margin-top: 130px;">
                        <div class="yyh-header-blue">
                            <div class="yyh-cell">陵水黎族自治县</div>
                            <div class="yyh-cell">受理量</div>
                            <div class="yyh-cell">审核量</div>
                            <div class="yyh-cell">参办人数</div>
                            <div class="yyh-cell">人均业务量</div>
                        </div>
                        <div class="yyh-row">
                            <div class="yyh-cell">名称登记</div>
                            <div class="yyh-cell">121</div>
                            <div class="yyh-cell">11</div>
                            <div class="yyh-cell">22</div>
                            <div class="yyh-cell">12</div>
                        </div>
                        <div class="yyh-row">
                            <div class="yyh-cell">设立登记</div>
                            <div class="yyh-cell">121</div>
                            <div class="yyh-cell">11</div>
                            <div class="yyh-cell">22</div>
                            <div class="yyh-cell">12</div>
                        </div>
                        <div class="yyh-row">
                            <div class="yyh-cell">变更登记</div>
                            <div class="yyh-cell">121</div>
                            <div class="yyh-cell">11</div>
                            <div class="yyh-cell">22</div>
                            <div class="yyh-cell">12</div>
                        </div>
                        <div class="yyh-row">
                            <div class="yyh-cell">注销</div>
                            <div class="yyh-cell">121</div>
                            <div class="yyh-cell">11</div>
                            <div class="yyh-cell">22</div>
                            <div class="yyh-cell">12</div>
                        </div>
                        <div class="yyh-row">
                            <div class="yyh-cell">总计</div>
                            <div class="yyh-cell">121</div>
                            <div class="yyh-cell">11</div>
                            <div class="yyh-cell">22</div>
                            <div class="yyh-cell">12</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="yyh-table text-center" id="tContent">
                    <div class="yyh-header-blue">
                        <div class="yyh-cell">序号</div>
                        <div class="yyh-cell">企业名称</div>
                        <div class="yyh-cell">注册号</div>
                        <div class="yyh-cell">任务清单</div>
                        <div class="yyh-cell">抽查日期</div>
                        <div class="yyh-cell">检查人员</div>
                        <div class="yyh-cell">抽查结果</div>
                        <div class="yyh-cell">查处结果</div>
                        <div class="yyh-cell">整改结果</div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="yyh-title-second">
                    双随机抽查结果统计分析
                </div>
                <div id="echarts-bar-tjfx" style="height:360px"></div>
            </div>
            <div class="row">
                <div class="yyh-title-second">
                    双随机抽查结果类型分析
                </div>
                <div id="echarts-bar-lxfx" style="height:360px"></div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="row text-center yyh-title">
                在线人数:<span class="yyh-title yyh-watch">242</span>
            </div>
            <div class="row text-center yyh-title">
                全省今日业务实时情况
            </div>
            <div class="row text-center yyh-count">
                <div class="yyh-title-second">
                    名称登记
                </div>
                <div class="col-md-6 yyh-border">
                    <p>受理</p>
                    <p class="yyh-left-number">337</p>
                </div>
                <div class="col-md-6 yyh-border">
                    <p>审核</p>
                    <p class="yyh-right-number">337</p>
                </div>
            </div>
            <div class="row text-center yyh-count">
                <div class="yyh-title-second">
                    设立登记
                </div>
                <div class="col-md-6 yyh-border">
                    <p>受理</p>
                    <p class="yyh-left-number">337</p>
                </div>
                <div class="col-md-6 yyh-border">
                    <p>审核</p>
                    <p class="yyh-right-number">337</p>
                </div>
            </div>
            <div class="row text-center yyh-count">
                <div class="yyh-title-second">
                    变更登记
                </div>
                <div class="col-md-6 yyh-border">
                    <p>受理</p>
                    <p class="yyh-left-number">337</p>
                </div>
                <div class="col-md-6 yyh-border">
                    <p>审核</p>
                    <p class="yyh-right-number">337</p>
                </div>
            </div>
            <div class="row text-center yyh-count">
                <div class="yyh-title-second">
                    注销登记
                </div>
                <div class="col-md-6 yyh-border">
                    <p>受理</p>
                    <p class="yyh-left-number">337</p>
                </div>
                <div class="col-md-6 yyh-border">
                    <p>审核</p>
                    <p class="yyh-right-number">337</p>
                </div>
            </div>
            <div class="row text-center yyh-count">
                <div class="yyh-title-second">
                    信息信息公示平台
                </div>
                <a href="http://www.gsxt.gov.cn/"><img src="/assets/img/qyxxgs.png" style="width: 100%; height: 100%;"></a>
            </div>
        </div>
    </div>
</div>
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="/assets/js/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/assets/js/bootstrap.min.js"></script>
<!-- ECharts单文件引入 -->
<script src="/assets/js/echarts-all.js"></script>
<script src="/assets/js/juicer-min.js"></script>
<script src="/app/service/global.service.js"></script>
<script src="/app/service/ajax.service.js"></script>
<script type="text/javascript">
    $(function () {
        //退出全屏
        var url = window.apiPoint + 'double-random-results/doubleRandom';
        console.log(url);
        var dataQuery = {
            page: 0,
            size: 5,
            doubleRandomId: 1
        };
        $.ajax({
            url: url,
            type: 'GET',
            // GET请求传递data
            data: dataQuery,
            async: true,
            dataType: 'json',
            success: function (data, status, xhr) {
                if (data) {
                    var result = {};
                    result['doubleRandomResults'] = data;
                    console.log(data);
                    var tpl = [
                        '{@each doubleRandomResults as it,index}',
                        '<div class="yyh-row">',
                        '<div class="yyh-cell">${it.id}</div>',
                        '<div class="yyh-cell">${it.companyName}</div>',
                        '<div class="yyh-cell">${it.companyRegisterId}</div>',
                        '<div class="yyh-cell">{@if it.doubleRandom.doubleRandomTaskContent != null }${it.doubleRandom.doubleRandomTaskContent}{@/if}</div>',
                        '<div class="yyh-cell">${it.people}</div>',
                        '<div class="yyh-cell">${it.doubleRandom.doubleRandomDate}</div>',
                        '<div class="yyh-cell">{@if it.result != null }${it.result}{@/if}责令查改</div>',
                        '<div class="yyh-cell">{@if it.resultDeal != null }${it.result}{@/if}已整改</div>',
                        '<div class="yyh-cell">{@if it.resultStatus != null }${it.result}{@/if}正常</div>',
                        '</div>',
                        '{@/each}'].join('');
                    var html = juicer(tpl, result);
                    $('#tContent').append(html);
                    console.log(html);

                }
            },
        });
    });
    tjfxoption = {
        tooltip: {
            trigger: 'axis'
        },
        legend: {
            data: ['异常量', '抽查量']
        },
        calculable: true,
        xAxis: [
            {
                type: 'category',
                data: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月']
            }
        ],
        yAxis: [
            {
                type: 'value'
            }
        ],
        series: [
            {
                name: '异常量',
                type: 'bar',
                data: [2, 4, 7, 23, 25, 76, 135, 162, 32, 20, 6, 3],
                markPoint: {
                    data: [
                        {type: 'max', name: '最大值'},
                        {type: 'min', name: '最小值'}
                    ]
                },
                markLine: {
                    data: [
                        {type: 'average', name: '平均值'}
                    ]
                }
            },
            {
                name: '抽查量',
                type: 'bar',
                data: [2, 5, 9, 26, 28, 70, 175, 182, 48, 18, 6, 2],
                markPoint: {
                    data: [
                        {name: '年最高', value: 182, xAxis: 7, yAxis: 183, symbolSize: 18},
                        {name: '年最低', value: 2, xAxis: 11, yAxis: 3}
                    ]
                },
                markLine: {
                    data: [
                        {type: 'average', name: '平均值'}
                    ]
                }
            }
        ]
    };
    var tjfxChart = echarts.init(document.getElementById("echarts-bar-tjfx"));
    tjfxChart.setOption(tjfxoption);
    lxfxoption = {
        tooltip: {
            trigger: 'item',
            formatter: "{a} <br/>{b} : {c} ({d}%)"
        },
        legend: {
            x: 'center',
            y: 'bottom',
            data: ['个体工商户', '国有企业', '外资企业', '民营企业', '股份制企业', '有限公司', '国有控股', '事业单位']
        },
        calculable: true,
        series: [
            {
                name: '异常分布',
                type: 'pie',
                radius: [30, 110],
                roseType: 'area',
                x: '50%',               // for funnel
                max: 40,                // for funnel
                sort: 'ascending',     // for funnel
                data: [
                    {value: 10, name: '个体工商户'},
                    {value: 5, name: '国有企业'},
                    {value: 15, name: '外资企业'},
                    {value: 25, name: '民营企业'},
                    {value: 20, name: '股份制企业'},
                    {value: 35, name: '有限公司'},
                    {value: 30, name: '国有控股'},
                    {value: 40, name: '事业单位'}
                ]
            }
        ]
    };

    var lxfxChart = echarts.init(document.getElementById("echarts-bar-lxfx"));
    lxfxChart.setOption(lxfxoption);
    cakeoption = {
        calculable: true,
        series: [{
            name: '访问来源',
            type: 'pie',
            radius: ['50%', '70%'],
            itemStyle: {
                normal: {
                    label: {
                        show: false
                    },
                    labelLine: {
                        show: false
                    }
                },
                emphasis: {
                    label: {
                        show: true,
                        position: 'center',
                        textStyle: {
                            fontSize: '30',
                            fontWeight: 'bold'
                        }
                    }
                }
            },
            data: [{
                value: 335,
                name: '直接访问'
            }, {
                value: 310,
                name: '邮件营销'
            }, {
                value: 234,
                name: '联盟广告'
            }, {
                value: 135,
                name: '视频广告'
            }, {
                value: 1548,
                name: '搜索引擎'
            }]
        }]
    };
    var cakeChart1 = echarts.init(document.getElementById("echarts-cake-chart1"));
    cakeChart1.setOption(cakeoption);
    var cakeChart2 = echarts.init(document.getElementById("echarts-cake-chart2"));
    cakeChart2.setOption(cakeoption);
    var data = [{
        name: '儋州市',
        value: 10000,
    }, {
        name: '文昌市',
        value: 20000,
    }, {
        name: '乐东黎族自治县',
        value: 3000,
    }, {
        name: '三亚市',
        value: 40000,
    }, {
        name: '琼中黎族苗族自治县',
        value: 1000,
    }, {
        name: '东方市',
        value: 1232,
    }, {
        name: '海口市',
        value: 32133,
    }, {
        name: '万宁市',
        value: 22311,
    }, {
        name: '澄迈县',
        value: 11232,
    }, {
        name: '白沙黎族自治县',
        value: 15314,
    }, {
        name: '琼海市',
        value: 32212,
    }, {
        name: '昌江黎族自治县',
        value: 21232,
    }, {
        name: '临高县',
        value: 12123,
    }, {
        name: '陵水黎族自治县',
        value: 12311,
    }, {
        name: '屯昌县',
        value: 5512,
    }, {
        name: '定安县',
        value: 6611,
    }, {
        name: '保亭黎族苗族自治县',
        value: 7712,
    }, {
        name: '五指山市',
        value: 9231,
    }];
    var mapChart = echarts.init(document.getElementById("echarts-map-chart"));
    var mapoption = {
        dataRange: {
            min: 0,
            max: 50000,
            x: 'right',
            y: 'bottom',
            text: ['高', '低'],           // 文本，默认为数值文本
            calculable: true
        },
        tooltip: {
            trigger: 'item'
        },
        legend: {
            orient: 'vertical',
            x: 'left',
            data: ['业务量']
        },
        series: [{
            name: '业务量',
            type: 'map',
            mapType: '海南',
            roam: false,
            itemStyle: {
                normal: {
                    label: {
                        show: true
                    }
                },
                emphasis: {
                    label: {
                        show: true
                    }
                }
            },
            data: data,
        }]
    };
    mapChart.setOption(mapoption);

    var placeHoledStyle = {
        normal: {
            barBorderColor: 'rgba(0,0,0,0)',
            color: 'rgba(0,0,0,0)'
        },
        emphasis: {
            barBorderColor: 'rgba(0,0,0,0)',
            color: 'rgba(0,0,0,0)'
        }
    };
    var dataStyle = {
        normal: {
            label: {
                show: true,
                position: 'insideLeft',
                formatter: '{c}%'
            }
        }
    };
    baroption = {
        tooltip: {
            trigger: 'axis',
            axisPointer: { // 坐标轴指示器，坐标轴触发有效
                type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
            },
            formatter: '{b}<br/>{a0}:{c0}%<br/>{a2}:{c2}%<br/>{a4}:{c4}%<br/>{a6}:{c6}%'
        },
        legend: {
            y: 55,
            itemGap: document.getElementById('echarts-bar-chart').offsetWidth / 8,
            data: ['完成比例']
        },
        grid: {
            y: 80,
            y2: 30
        },
        xAxis: [{
            type: 'value',
            position: 'top',
            splitLine: {
                show: false
            },
            axisLabel: {
                show: false
            }
        }],
        yAxis: [{
            type: 'category',
            splitLine: {
                show: false
            },
            data: ['企業年報率', '個體年報率', '農轉年報率']
        }],
        series: [{
            name: '完成比例',
            type: 'bar',
            stack: '总量',
            itemStyle: dataStyle,
            data: [38, 50, 33]
        }, {
            name: '完成比例',
            type: 'bar',
            stack: '总量',
            itemStyle: placeHoledStyle,
            data: [62, 50, 67]
        }]
    };
    var barChart = echarts.init(document.getElementById("echarts-bar-chart"));
    barChart.setOption(baroption);

    hymloption = {
        calculable : false,
        series : [
            {
                name:'访问来源',
                type:'pie',
                selectedMode: 'single',
                radius : [0, 70],

                // for funnel
                x: '20%',
                width: '40%',
                funnelAlign: 'right',
                max: 1548,

                itemStyle : {
                    normal : {
                        label : {
                            position : 'inner'
                        },
                        labelLine : {
                            show : false
                        }
                    }
                },
                data:[
                    {value:335, name:'国有企业'},
                    {value:679, name:'民营企业'},
                    {value:1548, name:'外资企业', selected:true}
                ]
            },
            {
                name:'访问来源',
                type:'pie',
                radius : [100, 140],

                // for funnel
                x: '60%',
                width: '35%',
                funnelAlign: 'left',
                max: 1048,

                data:[
                    {value:335, name:'批发和零售业'},
                    {value:310, name:'住宿和餐饮业'},
                    {value:234, name:'农、林、牧、渔业'},
                    {value:135, name:'制造业'},
                    {value:1048, name:'房地产业'},
                    {value:251, name:'教育'},
                    {value:147, name:'金融业'},
                    {value:102, name:'其他'}
                ]
            }
        ]
    };
    var hymlChart = echarts.init(document.getElementById("echarts-cake-chart-hyml"));
    hymlChart.setOption(hymloption);


</script>
</body>
</html>